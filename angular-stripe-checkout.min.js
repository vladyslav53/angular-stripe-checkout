(function(){"use strict";var e=angular.extend;var t="https://checkout.stripe.com/checkout.js";var n={key:"data-key",image:"data-image",name:"data-name",description:"data-description",amount:"data-amount",currency:"data-currency",panelLabel:"data-panel-label",zipCode:"data-zip-code",email:"data-email",label:"data-label"};var a={bitcoin:"data-bitcoin",allowRememberMe:"data-allow-remember-me",address:"data-address",billingAddress:"data-billingAddress",shippingAddress:"data-shippingAddress"};angular.module("stripe.checkout",[]).directive("stripeCheckout",i).provider("StripeCheckout",r);i.$inject=["$parse","StripeCheckout"];function i(e,t){return{link:i};function i(n,a,i){var o,c=e(i.stripeCheckout)(n);t.load().then(function(){o=t.configure(r(a))});a.on("click",function(){if(o)o.open(r(a)).then(function(e){c.apply(null,e)})})}function r(e){var t,i,r={};for(t in n){i=e.attr(n[t]);if(typeof i!=="undefined")r[t]=i}for(t in a){i=e.attr(a[t]);if(typeof i==="string")r[t]=i.toLowerCase()==="true"}return r}}function r(){var t={};this.defaults=function(n){e(t,n)};this.load=function(e){return e.load()};this.load.$inject=["StripeCheckout"];this.$get=function(e,n){return new o(e,n,t)};this.$get.$inject=["$document","$q"]}function o(t,n,a){var i={},r;this.configure=function(t){return new c(n,e({},a,i,t))};this.load=function(){if(!r)r=d(t,n);return r};this.defaults=function(t){e(i,t)}}function c(t,n){var a,i;var r=StripeCheckout.configure(e({},n,{token:function(e,t){if(n.token)n.token(e,t);i=true;a.resolve([e,t])},closed:function(){if(n.closed)n.closed();if(!i)a.reject()}}));this.open=function(e){a=t.defer();i=false;r.open(e);return a.promise}}function d(e,n){var a=n.defer();var i=e[0],r=i.createElement("script");r.src=t;r.onload=function(){a.resolve()};r.onreadystatechange=function(){var e=this.readyState;if(e==="loaded"||e==="complete")a.resolve()};r.onerror=function(){a.reject(new Error("Unable to load checkout.js"))};var o=i.getElementsByTagName("head")[0];o.appendChild(r);return a.promise}})();