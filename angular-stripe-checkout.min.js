(function(){"use strict";var e=angular.extend;var t="https://checkout.stripe.com/checkout.js";var n={key:"data-key",image:"data-image",name:"data-name",description:"data-description",amount:"data-amount",currency:"data-currency",panelLabel:"data-panel-label",zipCode:"data-zip-code",email:"data-email",label:"data-label",allowRememberMe:"data-allow-remember-me"};angular.module("stripe.checkout",[]).directive("stripeCheckout",a).provider("StripeCheckout",o);a.$inject=["$parse","StripeCheckout"];function a(e,t){return{link:a};function a(n,a,r){var i,c=e(r.stripeCheckout)(n);t.load().then(function(){i=t.configure(o(a))});a.on("click",function(){if(i)i.open().then(function(e){c.apply(null,e)})})}function o(e){var t,a,o={};for(t in n){a=e.attr(n[t]);if(typeof a!=="undefined")o[t]=a}return o}}function o(){var t={};this.defaults=function(n){e(t,n)};this.load=function(e){return e.load()};this.load.$inject=["StripeCheckout"];this.$get=function(e,n){return new r(e,n,t)};this.$get.$inject=["$document","$q"]}function r(t,n,a){var o={},r;this.configure=function(t){return new i(n,e({},a,o,t))};this.load=function(){if(!r)r=c(t,n);return r};this.defaults=function(t){e(o,t)}}function i(t,n){var a,o;var r=StripeCheckout.configure(e({},n,{token:function(e,t){if(n.token)n.token(e,t);o=true;a.resolve([e,t])},closed:function(){if(n.closed)n.closed();if(!o)a.reject()}}));this.open=function(e){a=t.defer();o=false;r.open(e);return a.promise}}function c(e,n){var a=n.defer();var o=e[0],r=o.createElement("script");r.src=t;r.onload=function(){a.resolve()};r.onreadystatechange=function(){var e=this.readyState;if(e==="loaded"||e==="complete")a.resolve()};r.onerror=function(){a.reject(new Error("Unable to load checkout.js"))};var i=o.getElementsByTagName("head")[0];i.appendChild(r);return a.promise}})();