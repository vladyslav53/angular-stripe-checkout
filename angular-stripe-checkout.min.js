(function(){"use strict";var e=angular.extend;var t="https://checkout.stripe.com/checkout.js";var n={key:"data-key",image:"data-image",name:"data-name",description:"data-description",amount:"data-amount",currency:"data-currency",panelLabel:"data-panel-label",zipCode:"data-zip-code",email:"data-email",label:"data-label",allowRememberMe:"data-allow-remember-me"};angular.module("stripe.checkout",[]).directive("stripeCheckout",a).provider("StripeCheckout",o);a.$inject=["$parse","StripeCheckout"];function a(e,t){return{link:a};function a(n,a,i){var r,c=e(i.stripeCheckout)(n);t.load().then(function(){r=t.configure(o(a))});a.on("click",function(){if(r)r.open().then(function(e){c.apply(null,e)})})}function o(e){var t,a,o={};for(t in n){a=e.attr(n[t]);if(typeof a!=="undefined")o[t]=a}return o}}function o(){var t={};this.defaults=function(n){e(t,n)};this.load=function(e){return e.load()};this.load.$inject=["StripeCheckout"];this.$get=function(e,n){return new i(e,n,t)};this.$get.$inject=["$document","$q"]}function i(t,n,a){var o={},i;this.configure=function(t){return new r(n,e({},a,o,t))};this.load=function(){if(!i)i=c(t,n);return i};this.defaults=function(t){e(o,t)}}function r(t,n){var a,o;var i=StripeCheckout.configure(e({},n,{token:function(e,t){if(n.token)n.token(e,t);o=true;a.resolve([e,t])},closed:function(){if(n.closed)n.closed();if(!o)a.reject()}}));this.open=function(e){a=t.defer();o=false;i.open(e);return a.promise}}function c(e,n){return n(function(n,a){var o=e[0],i=o.createElement("script");i.src=t;i.onload=function(){n()};i.onreadystatechange=function(){var e=this.readyState;if(e==="loaded"||e==="complete")n()};i.onerror=function(){a(new Error("Unable to load checkout.js"))};var r=o.getElementsByTagName("head")[0];r.appendChild(i)})}})();