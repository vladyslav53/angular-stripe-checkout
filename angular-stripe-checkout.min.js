(function(){"use strict";var e="stripe.checkout";var t="https://checkout.stripe.com/checkout.js";var n={key:"data-key",image:"data-image",name:"data-name",description:"data-description",amount:"data-amount",currency:"data-currency",panelLabel:"data-panel-label",zipCode:"data-zip-code",email:"data-email",label:"data-label"};var r={bitcoin:"data-bitcoin",allowRememberMe:"data-allow-remember-me",address:"data-address",billingAddress:"data-billingAddress",shippingAddress:"data-shippingAddress"};var a;if(typeof module!=="undefined"&&typeof module.exports==="object"){a=require("angular");module.exports=e}else{a=window.angular}var i=a.extend;a.module(e,[]).directive("stripeCheckout",o).provider("StripeCheckout",c);o.$inject=["$parse","StripeCheckout"];function o(e,t){return{link:a};function a(n,r,a){var o,c=e(a.stripeCheckout)(n);t.load().then(function(){o=t.configure(i(r))});r.on("click",function(){if(o)o.open(i(r)).then(function(e){c.apply(null,e)})})}function i(e){var t,a,i={};for(t in n){a=e.attr(n[t]);if(typeof a!=="undefined")i[t]=a}for(t in r){a=e.attr(r[t]);if(typeof a==="string")i[t]=a.toLowerCase()==="true"}return i}}function c(){var e={};this.defaults=function(t){i(e,t)};this.load=function(e){return e.load()};this.load.$inject=["StripeCheckout"];this.$get=function(t,n){return new d(t,n,e)};this.$get.$inject=["$document","$q"]}function d(e,t,n){var r={},a;this.configure=function(e){return new u(t,i({},n,r,e))};this.load=function(){if(!a)a=s(e,t);return a};this.defaults=function(e){i(r,e)}}function u(e,t){var n,r;var a=StripeCheckout.configure(i({},t,{token:function(e,a){if(t.token)t.token(e,a);r=true;n.resolve([e,a])},closed:function(){if(t.closed)t.closed();if(!r)n.reject()}}));this.open=function(t){n=e.defer();r=false;a.open(t);return n.promise}}function s(e,n){var r=n.defer();var a=e[0],i=a.createElement("script");i.src=t;i.onload=function(){r.resolve()};i.onreadystatechange=function(){var e=this.readyState;if(e==="loaded"||e==="complete")r.resolve()};i.onerror=function(){r.reject(new Error("Unable to load checkout.js"))};var o=a.getElementsByTagName("head")[0];o.appendChild(i);return r.promise}})();